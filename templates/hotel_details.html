{% extends "base.html" %}
{% block title %}{{ hotel.name }}{% endblock %}
{% block content %}
<div class="row">
  <div class="col-md-8">
    <h2>{{ hotel.name }}</h2>
    <p>{{ hotel.city }} • {{ hotel.stars }}★</p>

    <!-- image gallery -->
    <div class="row">
      {% for img in hotel.images %}
      <div class="col-md-4 mb-2">
        <img src="{{ url_for('static', filename='images/5.jpeg') }}" alt="Hotel Details">
      </div>
      {% endfor %}
    </div>

    <h4 class="mt-3">Rooms</h4>
    <div class="list-group">
      {% for r in hotel.rooms %}
      <div class="list-group-item d-flex justify-content-between align-items-center">
        <div>
          <h6>{{ r.type }} • Room No: {{ r.room_no }}</h6>
          <small>₹ {{ r.price }} / night • Available: {{ r.available }}</small>
        </div>
        <div>
          <form action="{{ url_for('book') }}" method="post">
            <input type="hidden" name="hotel_id" value="{{ hotel._id }}">
            <input type="hidden" name="room_id" value="{{ r.room_id }}">  <!-- use room_id now -->
            
            <div class="mb-2">
              <input type="date" name="checkin" required>
              <input type="date" name="checkout" required>
            </div>

            <div class="mb-2">
              <label>Quantity:</label>
              <input type="number" name="quantity" min="1" max="{{ r.available }}" value="1" required>
            </div>

            {% if r.available > 0 %}
              <button class="btn btn-success">Book</button>
            {% else %}
              <button class="btn btn-secondary" disabled>Sold out</button>
            {% endif %}
          </form>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>

  <div class="col-md-4">
    <div class="card p-3">
      <h5>Amenities</h5>
      <ul>
        {% for a in hotel.amenities %}
        <li>{{ a }}</li>
        {% endfor %}
      </ul>
      <a href="{{ url_for('search') }}" class="btn btn-outline-secondary">Back to search</a>
    </div>
  </div>
</div>
{% endblock %}
